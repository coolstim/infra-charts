apiVersion: v1
kind: ConfigMap
metadata:
  name: 
  namespace: {{ .Values.namespace }}
data:
  log4j2.xml: |-
    <?xml version="1.0" encoding="UTF-8"?>
        <Configuration>
          <Appenders>

            <Console name="STDOUT" target="SYSTEM_OUT">
              <PatternLayout>
                <Pattern>
                  %maxLen{%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p (%t) [%notEmpty{c:%X{collection}}%notEmpty{ s:%X{shard}}%notEmpty{ r:%X{replica}}%notEmpty{ x:%X{core}}] %c{1.} %m%notEmpty{ =>%ex{short}}}{10240}%n
                </Pattern>
              </PatternLayout>
            </Console>

            <RollingRandomAccessFile
                name="MainLogFile"
                fileName="${sys:solr.log.dir}/solr.log"
                filePattern="${sys:solr.log.dir}/solr.log.%i" >
              <PatternLayout>
                <Pattern>
                  %maxLen{%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p (%t) [%notEmpty{c:%X{collection}}%notEmpty{ s:%X{shard}}%notEmpty{ r:%X{replica}}%notEmpty{ x:%X{core}}] %c{1.} %m%notEmpty{ =>%ex{short}}}{10240}%n
                </Pattern>
              </PatternLayout>
              <Policies>
                <OnStartupTriggeringPolicy />
                <SizeBasedTriggeringPolicy size="32 MB"/>
              </Policies>
              <DefaultRolloverStrategy max="10"/>
            </RollingRandomAccessFile>

            <RollingRandomAccessFile
                name="SlowLogFile"
                fileName="${sys:solr.log.dir}/solr_slow_requests.log"
                filePattern="${sys:solr.log.dir}/solr_slow_requests.log.%i" >
              <PatternLayout>
                <Pattern>
                  %maxLen{%d{yyyy-MM-dd HH:mm:ss.SSS} %-5p (%t) [%notEmpty{c:%X{collection}}%notEmpty{ s:%X{shard}}%notEmpty{ r:%X{replica}}%notEmpty{ x:%X{core}}] %c{1.} %m%notEmpty{ =>%ex{short}}}{10240}%n
                </Pattern>
              </PatternLayout>
              <Policies>
                <OnStartupTriggeringPolicy />
                <SizeBasedTriggeringPolicy size="32 MB"/>
              </Policies>
              <DefaultRolloverStrategy max="10"/>
            </RollingRandomAccessFile>

          </Appenders>
          <Loggers>
            <!-- Use <AsyncLogger/<AsyncRoot and <Logger/<Root for asynchronous logging or synchonous logging respectively -->
            <AsyncLogger name="org.apache.hadoop" level="warn"/>
            <AsyncLogger name="org.apache.solr.update.LoggingInfoStream" level="off"/>
            <AsyncLogger name="org.apache.zookeeper" level="warn"/>
            <!-- HttpSolrCall adds markers denoting the handler class to allow fine grained control, metrics are
                very noisy so by default the metrics handler is turned off to see metrics logging set DENY to ACCEPT -->
            <AsyncLogger name="org.apache.solr.servlet.HttpSolrCall" level="info">
              <MarkerFilter marker="org.apache.solr.handler.admin.MetricsHandler" onMatch="DENY" onMismatch="ACCEPT"/>
            </AsyncLogger>
            <AsyncLogger name="org.apache.solr.core.SolrCore.SlowRequest" level="info" additivity="false">
              <AppenderRef ref="SlowLogFile"/>
            </AsyncLogger>
            <AsyncLogger name="org.eclipse.jetty.deploy" level="warn"/>
            <AsyncLogger name="org.eclipse.jetty.webapp" level="warn"/>
            <AsyncLogger name="org.eclipse.jetty.server.session" level="warn"/>

            <AsyncRoot level="info">
              <AppenderRef ref="STDOUT"/>
            </AsyncRoot>
          </Loggers>
        </Configuration>
  solr.xml: "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<solr>\n\t<int name=\"maxBooleanClauses\">262144</int>\n\t<str name=\"sharedLib\">/opt/solr/contrib/s3-repository/lib,/opt/solr/dist</str>\n\t<solrcloud>\n\t\t<str name=\"host\">${host:}</str>\n\t\t<int name=\"hostPort\">${hostPort:80}</int>\n\t\t<str name=\"hostContext\">${hostContext:solr}</str>\n\t\t<bool name=\"genericCoreNodeNames\">${genericCoreNodeNames:true}</bool>\n\t\t<int name=\"zkClientTimeout\">${zkClientTimeout:30000}</int>\n\t\t<int name=\"distribUpdateSoTimeout\">${distribUpdateSoTimeout:600000}</int>\n\t\t<int name=\"distribUpdateConnTimeout\">${distribUpdateConnTimeout:60000}</int>\n\t\t<str name=\"zkCredentialsProvider\">${zkCredentialsProvider:org.apache.solr.common.cloud.DefaultZkCredentialsProvider}</str>\n\t\t<str name=\"zkACLProvider\">${zkACLProvider:org.apache.solr.common.cloud.DefaultZkACLProvider}</str>\n\t</solrcloud>\n\t<shardHandlerFactory name=\"shardHandlerFactory\"\n\t\tclass=\"HttpShardHandlerFactory\">\n\t\t<int name=\"socketTimeout\">${socketTimeout:600000}</int>\n\t\t<int name=\"connTimeout\">${connTimeout:60000}</int>\n\t</shardHandlerFactory>\n\t<backup>\n\t\t<repository name=\"my-backup-repo\" class=\"org.apache.solr.s3.S3BackupRepository\">\n\t\t\t<str name=\"s3.bucket.name\">solrcloudbackup</str>\n\t\t\t<str name=\"s3.region\">us-east-1</str>\n\t\t</repository>\n\t</backup>\n</solr>"